<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
    <title>Tashes</title>
    <link rel="stylesheet" href="assets/css/normalize.css"/>
    <link href="https://fonts.googleapis.com/css?family=Bitter|Niramit|PT+Mono" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous">
    <link rel="stylesheet" href="assets/css/styles.css"/>
    <link rel="stylesheet" href="assets/css/colours.css"/>
</head>
<body>
    <div id="app">
        <div id="background" :style="{background: bg}"></div>
        <div id="middleground">
            <header>
                <i class="fas fa-search"></i>
                <input type="text" placeholder="Search" v-model="search" @keyup="handleSearch()"/>
            </header>
            <section>
                <!-- Listing -->
                <section id="list" v-if="state === 'list'">
                    <div id="line"></div>
                    <!-- Listing Article -->
                    <div id="listing">
                        <div class="entry" v-for="item in articles_list" :class="(item.type === 'date') ? ('date') : ((item.type === 'article') ? ('article') : (''))">
                            <!-- Date Type of Entry -->
                            <time datetime="item.time" v-if="item.type === 'date'" @click="handleTimeClick(item.time)">{{moment(item.time).format("DDMMYYYY")}}</time>
                            <!-- Article Type of Entry -->
                            <article v-if="item.type === 'article'">                               
                                <time>{{moment(item.time).format("hhmm")}}</time>
                                <p v-html="renderMD(item.text)"></p>
                                <div class="bottom">
                                    <span v-if="item.tag" @click="handleTagClick(item.tag)">#{{item.tag}}</span>
                                    <a @click="handleArticleClick(item)">Read More</a>
                                </div>       
                            </article>
                        </div>
                    </div>
                </section>
                <!-- Individual Article -->
                <section id="article" v-if="state === 'article'">
                    <div id="article_preview" v-if="article.state === 'preview'">
                        <h1 @click="handleTimeClick(article.time)">{{moment(article.time).format("DDMMYYYY")}}</h1>
                        <h2>{{moment(article.time).format("hhmm")}}</h2>
                        <br/>
                        <div class="tag" v-if="article.tag" @click="handleTagClick(article.tag)">#{{article.tag}}</div>
                        <hr/>
                        <article v-html="article_html"></article>
                    </div>
                    <div id="article_loading" v-if="article.state === 'loading'">
                        <progress :value="article.loaded" max="100"></progress>
                    </div>
                    <div id="article_error" v-if="article.state === 'error'">
                        <h1>{{article.error}}</h1>
                        <h2>{{article.error_flavour}}</h2>
                    </div>
                </section>
                <!-- Loading Screen -->
                <section id="loading" v-if="state === 'loading'">
                    <div id="spinner"></div>
                </section>
            </section>
        </div>
    </div>

    <script src="assets/js/vue.js"></script>
    <script src="assets/js/moment.js"></script>
    <script src="  https://cdnjs.cloudflare.com/ajax/libs/showdown/1.8.6/showdown.min.js"></script>
    <script src="assets/js/script.js"></script>
</body>
</html>